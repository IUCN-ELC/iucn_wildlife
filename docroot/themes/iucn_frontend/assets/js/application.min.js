!function(a){a.fn.select2.amd.define("select2/data/custom",["select2/data/array","select2/selection/multiple","select2/selection/placeholder","select2/utils"],function(b,c,d,e){var f=function(a,b){f.__super__.constructor.call(this,a,b)};return e.Extend(f,b),c.prototype.selectionContainer=function(){var b=a('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span>&nbsp;</li>');return b},d.prototype.update=function(a,b){var c=this.createPlaceholder(this.placeholder);return this.$selection.find(".select2-selection__rendered").append(c),a.call(this,b)},f});var b=a("#iucn-search-filters"),c=a.fn.select2.amd.require("select2/data/custom"),d=a(window);a(".form-select",b).select2({dataAdapter:c,matcher:function(a,b){return b.selected===!0?null:void 0!==a.term&&b.text.toLowerCase().indexOf(a.term.toLowerCase())===-1?null:(b.term=a.term,b)},placeholder:function(){a(this).data("placeholder")},templateResult:function(b){var c=b.text;if(void 0!==b.term){var d=c.toLowerCase().indexOf(b.term.toLowerCase()),e=b.term.length;c=c.substr(0,d)+"<em>"+c.substr(d,e)+"</em>"+c.substr(d+e)}var f=/\(([0-9]+)\)/,g=c.match(f);if(null===g)return b.text;var h='<span class="counter">'+g[1].trim()+"</span>"+c.substring(0,g.index);return a.parseHTML(h)},templateSelection:function(b){var c=/\(([0-9]+)\)/,d=b.text.match(c),e=null===d?'<span class="option">'+b.text+"</span>":'<span class="option">'+b.text.substring(0,d.index)+'</span> <sup class="badge">'+d[1].trim()+"</sup>";return a.parseHTML(e)}}).removeClass("select2-hidden-accessible").addClass("sr-only"),a(".select2-selection").on("click",".select2-selection__choice__remove",function(a){a.stopPropagation()}),b.on({reset:function(b){b.preventDefault();var c=a(this);a(".form-select",c).val("").trigger("change.select2"),a(".form-checkbox",c).bootstrapSwitch("state",!1,!0),c.get(0).reset(),c.submit()},submit:function(){var a=d.scrollTop();window.sessionStorage.setItem("offset",a)}}),a('input[type="checkbox"]',b).bootstrapSwitch({labelWidth:9,offText:Drupal.t("or"),onText:Drupal.t("and"),size:"mini"}),a(".search-filters",b).removeClass("invisible");var e=window.sessionStorage.getItem("offset");e&&(window.sessionStorage.removeItem("offset"),d.scrollTop(e));var f=function(){b.submit()};a("select",b).change(f),a('input[type="checkbox"]',b).on("switchChange.bootstrapSwitch",f);var g,h=200;d.resize(function(){g||(g=setTimeout(function(){a(".form-select",b).each(function(){var b=a(this).data("select2"),c=b._resolveWidth(b.$element,b.options.get("width"));c&&b.$container.width(c)}),g=null},h))});var i=a(".range-slider",b).ionRangeSlider({force_edges:!0,prettify_enabled:!1,grid:!0,type:"double",onChange:function(c){a('[name="yearmin"]',b).val(c.from),a('[name="yearmax"]',b).val(c.to)}}).data("ionRangeSlider");a('[type="number"]',b).change(function(){var b=a(this);"yearmin"===b.attr("name")?i.update({from:b.val()}):"yearmax"===b.attr("name")&&i.update({to:b.val()})});var j=a("#search-form");a(".close",j).click(function(){a(".form-control",j).val(""),j.submit()}),a("body").on("click","#sliding-popup .agree-button",function(){a("#sliding-popup").remove()})}(jQuery);