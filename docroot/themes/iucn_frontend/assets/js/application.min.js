!function(a){a.fn.select2.amd.define("select2/data/custom",["select2/data/array","select2/selection/multiple","select2/selection/placeholder","select2/utils"],function(b,c,d,e){var f=function(a,b){f.__super__.constructor.call(this,a,b)};return e.Extend(f,b),c.prototype.selectionContainer=function(){var b=a('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span>&nbsp;</li>');return b},d.prototype.update=function(a,b){var c=this.createPlaceholder(this.placeholder);return this.$selection.find(".select2-selection__rendered").append(c),a.call(this,b)},f});var b=a("#iucn-search-filters"),c=a.fn.select2.amd.require("select2/data/custom"),d=a(window);a(".form-select",b).select2({dataAdapter:c,placeholder:function(){a(this).data("placeholder")},templateResult:function(b){var c=b.text.split(" (");if(1===c.length)return b.text;var d='<span class="counter">'+c[1].split(")")[0]+"</span>"+c[0];return a.parseHTML(d)},templateSelection:function(b,c){var d=b.text.split(" (");if(1===d.length)return b.text;var e=d[0]+' <sup class="badge">'+d[1].split(")")[0]+"</sup>";return a.parseHTML(e)}}).removeClass("select2-hidden-accessible").addClass("sr-only"),a(".select2-selection").on("click",".select2-selection__choice__remove",function(a){a.stopPropagation()}),b.on({reset:function(b){b.preventDefault();var c=a(this);a(".form-select",c).val("").trigger("change.select2"),a(".form-checkbox",c).bootstrapSwitch("state",!1,!0),c.get(0).reset(),c.submit()},submit:function(){var a=d.scrollTop();window.sessionStorage.setItem("offset",a)}}),a('input[type="checkbox"]',b).bootstrapSwitch({labelWidth:9,offText:Drupal.t("or"),onText:Drupal.t("and"),size:"mini"}),a(".search-submit",b).hide(),a(".search-filters",b).removeClass("invisible");var e=window.sessionStorage.getItem("offset");e&&(window.sessionStorage.removeItem("offset"),d.scrollTop(e));var f=function(){b.submit()};a("select",b).change(f),a('input[type="checkbox"]',b).on("switchChange.bootstrapSwitch",f);var g,h=200;d.resize(function(){g||(g=setTimeout(function(){a(".form-select",b).each(function(){var b=a(this).data("select2"),c=b._resolveWidth(b.$element,b.options.get("width"));c&&b.$container.width(c)}),g=null},h))})}(jQuery);